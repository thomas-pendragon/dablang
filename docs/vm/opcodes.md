---
layout: page
title: VM opcodes
exclude_from_nav: true
---

## NOP

|Opcode |Name    |Arguments|
|-------|--------|---------|
|`00`|`NOP`||

<br>
## STACK PUSH

|Opcode |Name    |Arguments|
|-------|--------|---------|
|`01`|`PUSH_CLASS`|`uint16`|
|`02`|`PUSH_CONSTANT`|`uint16`|
|`03`|`PUSH_ARG`|`uint16`|
|`04`|`PUSH_INSTVAR`||
|`05`|`PUSH_SYMBOL`|`vlc`|
|`06`|`PUSH_METHOD`|`vlc`|
|`07`|`PUSH_SSA`|`reg`|

<br>
## STACK OTHER

|Opcode |Name    |Arguments|
|-------|--------|---------|
|`08`|`POP`|`uint16`|

<br>
## CONSTANTS

|Opcode |Name    |Arguments|
|-------|--------|---------|
|`09`|`CONSTANT_SYMBOL`|`vlc`|
|`0A`|`CONSTANT_STRING`|`vlc`|
|`0B`|`CONSTANT_NUMBER`|`uint64`|

<br>
## CALLS

|Opcode |Name    |Arguments|
|-------|--------|---------|
|`0C`|`CAST`|`uint16`|

<br>
## FLOW

|Opcode |Name    |Arguments|
|-------|--------|---------|
|`0D`|`JMP`|`int16`|
|`0E`|`JMP_IF`|`int16`|
|`0F`|`JMP_IFN`|`int16`|
|`10`|`JMP_IF2`|`int16`, `int16`|
|`11`|`Q_JMP_IF2`|`reg`, `int16`, `int16`|
|`12`|`YIELD`|`uint16`|

<br>
## COVERAGE

|Opcode |Name    |Arguments|
|-------|--------|---------|
|`13`|`COV_FILE`|`uint16`, `vlc`|
|`14`|`COV`|`uint16`, `uint16`|

<br>
## OTHER

|Opcode |Name    |Arguments|
|-------|--------|---------|
|`15`|`START_FUNCTION`|`vlc`, `uint16`, `uint16`, `uint16`|
|`16`|`LOAD_FUNCTION`|`uint16`, `vlc`, `uint16`|
|`17`|`STACK_RESERVE`|`uint16`|
|`18`|`DEFINE_CLASS`|`vlc`, `uint16`, `uint16`|
|`19`|`BREAK_LOAD`||
|`1A`|`REFLECT`|`uint16`|
|`1B`|`DESCRIBE_FUNCTION`|`vlc`, `uint16`|

<br>
## REGISTER-BASED OPCODES - SETTERS

|Opcode |Name    |Arguments|
|-------|--------|---------|
|`1C`|`Q_SET_CONSTANT`|`reg`, `int16`|
|`1D`|`Q_SET_POP`|`reg`|
|`1E`|`Q_SET_NUMBER`|`reg`, `uint64`|
|`1F`|`Q_SET_ARG`|`reg`, `uint16`|
|`20`|`Q_SET_CLASS`|`reg`, `uint16`|
|`21`|`Q_SET_CALL`|`reg`, `symbol`, `reglist`|
|`22`|`Q_SET_SYSCALL`|`reg`, `uint8`, `reglist`|
|`23`|`Q_SET_REG`|`reg`, `reg`|
|`24`|`Q_SET_CLOSURE`|`reg`, `uint16`|
|`25`|`Q_SET_NIL`|`reg`|
|`26`|`Q_SET_INSTCALL`|`reg`, `reg`, `symbol`, `reglist`|
|`27`|`Q_SET_CALL_BLOCK`|`reg`, `symbol`, `symbol`, `reg`, `reglist`|
|`28`|`Q_SET_TRUE`|`reg`|
|`29`|`Q_SET_FALSE`|`reg`|
|`2A`|`Q_SET_INSTVAR`|`reg`, `symbol`|
|`2B`|`Q_SET_INSTCALL_BLOCK`|`reg`, `reg`, `symbol`, `symbol`, `reg`, `reglist`|

<br>
## REGISTER-BASED OPCODES - OTHER

|Opcode |Name    |Arguments|
|-------|--------|---------|
|`2C`|`Q_RELEASE`|`reg`|
|`2D`|`Q_CHANGE_INSTVAR`|`symbol`, `reg`|
|`2E`|`Q_RETURN`|`reg`|
|`2F`|`Q_RETAIN`|`reg`|
|`30`|`Q_CAST`|`reg`, `reg`, `uint16`|

<br>
## REGISTER-BASED OPCODES - TYPED NUMBERS

|Opcode |Name    |Arguments|
|-------|--------|---------|
|`31`|`Q_SET_NUMBER_INT32`|`reg`, `int32`|
|`32`|`Q_SET_NUMBER_UINT8`|`reg`, `uint8`|
|`33`|`Q_SET_NUMBER_UINT32`|`reg`, `uint32`|
|`34`|`Q_SET_NUMBER_UINT64`|`reg`, `uint64`|

<br>
## NEW

|Opcode |Name    |Arguments|
|-------|--------|---------|
|`35`|`Q_SET_HAS_BLOCK`|`reg`|
|`36`|`Q_SET_NEW_ARRAY`|`reg`, `reglist`|
|`37`|`Q_SET_SELF`|`reg`|
|`38`|`Q_YIELD`|`reglist`|
|`39`|`W_HEADER`|`uint16`|
|`3A`|`W_SECTION`|`uint16`, `string4`|
|`3B`|`W_END_HEADER`||
|`3C`|`W_STRING`|`cstring`|
|`3D`|`Q_SET_STRING`|`reg`, `uint64`, `uint64`|
|`3E`|`W_SYMBOL`|`uint64`|

<br>
Autogenerated from `src/shared/opcodes.rb`, last revised: 2017-10-15
