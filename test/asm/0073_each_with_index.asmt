## CODE

class Array
{
  func each_with_index()
  {
    var index = 0;
    var count = self.count;
    while (index != count)
    {
      yield(self[index], index);
      index = index + 1;
    }
  }
}

## OPTIONS

--no-strip

## EXPECT

/* Dab dev      */                
 
                                 CONSTANT_SYMBOL "!="
                                 CONSTANT_SYMBOL "+"
                                 CONSTANT_SYMBOL "[]"
                                 CONSTANT_SYMBOL count
 
                                 DEFINE_CLASS Array, 5, 0
                                 LOAD_FUNCTION CArray_Feach_with_index, each_with_index, 5
 
                                 BREAK_LOAD 
 
                   CArray_Feach_with_index:
                                 STACK_RESERVE 0
/* 0            */               Q_SET_NUMBER R0, 0
                                 PUSH_SELF 
                                 Q_SET_POP R1
/* count        */               Q_SET_INSTCALL R2, R1, S3
                                 JMP L1
                   L1:
/* !=           */               Q_SET_CALL R3, S0, R0, R2
                                 Q_JMP_IF2 R3, L2, L3
                   L2:
                                 PUSH_SELF 
                                 Q_SET_POP R4
                                 PUSH_SSA R0
                                 PUSH_SSA R4
/* []           */               PUSH_CONSTANT 2
                                 INSTCALL 1
                                 PUSH_SSA R0
                                 YIELD 2
                                 POP 1
/* 1            */               Q_SET_NUMBER R5, 1
/* +            */               Q_SET_CALL R0, S1, R0, R5
                                 JMP L1
                   L3:
                                 Q_SET_NIL R6
                                 PUSH_SSA R6
                                 RETURN
