## CODE

class Array
{
  func each_with_index()
  {
    var index = 0;
    var count = self.count;
    while (index != count)
    {
      yield(self[index], index);
      index = index + 1;
    }
  }
}

## OPTIONS

--no-strip

## EXPECT

/* Dab dev      */                
 
                                 CONSTANT_SYMBOL "!="
                                 CONSTANT_SYMBOL "+"
                                 CONSTANT_SYMBOL Array
                                 CONSTANT_SYMBOL "[]"
                                 CONSTANT_SYMBOL count
                                 CONSTANT_SYMBOL each_with_index
 
                                 DEFINE_CLASS Array, 5, 0
                                 LOAD_FUNCTION CArray_Feach_with_index, each_with_index, 5
 
                                 BREAK_LOAD 
 
                   CArray_Feach_with_index:
                                 STACK_RESERVE 0
/* 0            */               Q_SET_NUMBER R0, 0
                                 Q_SET_SELF R1
/* count        */               Q_SET_INSTCALL R2, R1, S4
                                 JMP L1
                   L1:
/* !=           */               Q_SET_INSTCALL R3, R0, S0, R2
                                 Q_JMP_IF2 R3, L2, L3
                   L2:
                                 Q_SET_SELF R4
/* []           */               Q_SET_INSTCALL R5, R4, S3, R0
                                 Q_YIELD R5, R0
                                 POP 1
/* 1            */               Q_SET_NUMBER R6, 1
/* +            */               Q_SET_INSTCALL R0, R0, S1, R6
                                 JMP L1
                   L3:
                                 Q_RETURN RNIL
